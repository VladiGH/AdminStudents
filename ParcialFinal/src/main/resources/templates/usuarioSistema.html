<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Usuarios Sistema</title>
        <script type="text/javascript">
        function handler() {
            let fecha = document.getElementById("fechaNacimiento").value;
            let bd = new Date(fecha);
            let diff_ms = Date.now() - bd.getTime();
            let age_dt = new Date(diff_ms);
            let age = Math.abs(age_dt.getUTCFullYear() - 1970);
            if (age !== NaN) document.getElementById("edad").defaultValue = age;
        }</script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
</head>

<body>
<div class="container">

        <form th:action="@{/guardarUsuarioSistema}" th:object="${user}" method="post" class="well form-horizontal">
            <fieldset>
            <legend>
                <center>
                    <h3 style="color: #E81505" th:text=${respuesta} />
                </center>
            </legend><br>

            <div class="form-group">
                <label for="nombre" class="col-md-4 control-label">Nombre </label>
                <div class="col-md-4 inputGroupContainer">
                    <div class="input-group">
                        <input th:field="*{nombre}" id="nombre" type="text" placeholder="Ingresa el nombre"
                               name="nombre" class="col-md-4 control-label" />
                        <span th:text="${nombres}" style="color: #E81505"></span>
                    </div>
                </div>

            </div>


            <div class="form-group">
                <label for="apellido" class="col-md-4 control-label">Apellido </label>
                <div class="col-md-4 inputGroupContainer">
                    <div class="input-group">
                        <input th:field="*{apellido}" id="apellido" type="text" placeholder="Ingresa el apellido"
                               name="apellido" class="col-md-4 control-label" />
                        <span th:text="${apellidos}" style="color: #E81505"></span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="descripcion" class="col-md-4 control-label">Descripcion </label>
                <div class="col-md-4 inputGroupContainer">
                    <div class="input-group">
                        <input th:field="*{descripcion}" id="apellido" type="text"
                               placeholder="Ingresa la descripcion" name="descripcion"
                               class="col-md-4 control-label" />
                        <span th:text="${descripciones}" style="color: #E81505"></span>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="fechaNacimiento">Fecha de nacimiento </label>
                <input type="date" id="fechaNacimiento" onchange="handler()" min="1969-01-01" max="2020-01-01"
                       th:field="*{fechaNacimiento}">
            </div>
			<div class="form-group">
                <laber for="edad" class="col-md-4 control-label">Edad</laber>
                <input id="edad" type="text" name="edad" readonly />
            </div>
            <br>
            <div class="form-group">
                <label for="direccion" class="col-md-4 control-label">Direccion </label>
                <div class="col-md-4 inputGroupContainer">
                    <div class="input-group">
                        <input th:field="*{direccion}" id="apellido" type="text" placeholder="Ingresa la direccion"
                               name="direccion" class="form-control" />
                        <span th:text="${direcciones}" style="color: #E81505"></span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <input type="checkbox" th:field="*{estado}" th:value="${false}">
                <label>Estado </label>
            </div>

            <div class="form-group">
                <label for="username" class="col-md-4 control-label">Username </label>
                <div class="col-md-4 inputGroupContainer">
                    <div class="input-group">
                        <input th:field="*{username}" id="username" type="text" placeholder="Ingresa el username"
                               name="username" class="form-control" />
                        <span th:text="${usernames}" style="color: #E81505"></span>

                    </div>
                </div>
            </div>
            <br>
            <div class="form-group">
                <label for="password">Password </label>
                <div class="col-md-4 inputGroupContainer">
                    <div class="input-group">
                        <input th:field="*{password}" id="password" type="text" placeholder="Ingresa el password"
                               name="password" />
                        <span th:text="${passwords}" style="color: #E81505"></span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <th>
                    <label>Rol</label>
                    <select th:field="*{rol.id_rol}">
                        <option th:each="rol: ${roles}" th:value="${rol.id_rol}" th:text="${rol.NombreDelegate}">
                        </option>
                    </select>
                </th>
            </div>
            <div class="form-group">
                <th>
                    <label>Municipio de Residencia </label>
                    <select th:field="*{municipio.codigoMunicipio}" id="codigoMunicipio">
                        <option th:each="muni: ${municipios}" th:value="${muni.codigoMunicipio}"
                                th:text="${muni.nombre} +' Departamento: ' + ${muni.departamento.nombre}">
                        </option>
                    </select>
                </th>
            </div>
            <br><br>
            <input type="submit" value="Guardar" />
    </fieldset>
    </form>
</div>
</body>

</html>