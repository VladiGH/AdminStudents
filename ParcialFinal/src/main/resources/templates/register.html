<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <meta charset="UTF-8">
    <title>Register</title>
    <script type="text/javascript">
        function handler() {
            let fecha = document.getElementById("fechaNacimiento").value;
            let bd = new Date(fecha);
            let diff_ms = Date.now() - bd.getTime();
            let age_dt = new Date(diff_ms);
            let age = Math.abs(age_dt.getUTCFullYear() - 1970);
            if (age !== NaN) document.getElementById("edad").defaultValue = age;
        }</script>
</head>

<body>

<div class="container">
<h1>Ingreso de nuevo usuario</h1>
    <form th:action="@{/register}" method="post" th:object="${user}" class="well form-horizontal">
        <fieldset>

            <legend>
                <center>
                    <h3 style="color: #E81505" th:text=${respuesta} />
                </center>
            </legend><br>

            <br>
            <div class="form-group">
                <label for="nombre" class="col-md-4 control-label">Nombre </label>
                <div class="col-md-4 inputGroupContainer">
                    <div class="input-group">
                        <input th:field="*{nombre}" id="nombre" type="text" placeholder="Ingresa el nombre"
                               name="nombre" class="form-control" />
                    </div>
                        <span th:text="${nombres}" style="color: #E81505"></span>
                </div>
            </div>
            <br>
            <br>
            <div class="form-group">
                <label for="apellido" class="col-md-4 control-label">Apellido </label>
                <div class="col-md-4 inputGroupContainer">
                    <div class="input-group">
                        <input th:field="*{apellido}" id="apellido" type="text" placeholder="Ingresa el apellido"
                               name="apellido" />
                        <span th:text="${apellidos}" style="color: #E81505"></span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="descripcion">Descripcion </label>
                <div class="col-md-4 inputGroupContainer">
                    <div class="input-group">
                        <input th:field="*{descripcion}" id="apellido" type="text"
                               placeholder="Ingresa la descripcion" name="descripcion" />
                        <span th:text="${descripciones}" style="color: #E81505"></span>
                    </div>
                </div>
            </div>


            <div class="form-group">
                <label for="fechaNacimiento">Fecha de nacimiento </label>
                <input type="date" onchange="handler()" id="fechaNacimiento" min="1969-01-01" max="2020-01-01"
                       th:field="*{fechaNacimiento}">

            </div>
            
			<div class="form-group">
                <laber for="edad" class="col-md-4 control-label">Edad</laber>
                <input id="edad" type="text" name="edad" readonly />
            </div>
            <br>
            <div class="form-group">
                <label for="direccion">Direccion </label>
                <div class="col-md-4 inputGroupContainer">
                    <div class="input-group">
                        <input th:field="*{direccion}" id="apellido" type="text" placeholder="Ingresa la direccion"
                               name="direccion" />
                        <span th:text="${direcciones}" style="color: #E81505"></span>
                    </div>
                </div>
            </div>
            <br>
            <br>
            <div class="form-group">
                <label for="username">Username </label>
                <div class="col-md-4 inputGroupContainer">
                    <div class="input-group">
                        <input th:field="*{username}" id="username" type="text" placeholder="Ingresa el username"
                               name="username" />
                        <span th:text="${usernames}" style="color: #E81505"></span>
                    </div>
                </div>
            </div>
            <br>
            <div class="form-group">
                <label for="password">Password </label>
                <div class="col-md-4 inputGroupContainer">
                    <div class="input-group">
                        <input th:field="*{password}" id="password" type="text" placeholder="Ingresa el password"
                               name="password" />
                        <span th:text="${passwords}" style="color: #E81505"></span>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <th>
                    <label>Municipio de residencia </label>
                    <select th:field="*{municipio.codigoMunicipio}" id="codigoMunicipio">
                        <option th:each="muni: ${municipios}" th:value="${muni.codigoMunicipio}"
                                th:text="${muni.nombre} +' Departamento: ' + ${muni.departamento.nombre}">
                        </option>
                       
                    </select>
                    
                </th>
            </div>
            <div class="form-group">
                <input type="submit" value="Guardar" class="btn btn-warning" />
            </div>

        </fieldset>
    </form>
</div>
</body>

</html>